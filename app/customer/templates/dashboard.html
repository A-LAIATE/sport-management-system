{% extends "base.html" %}

{%block styles%}
<link href="{{url_for('customer.static',filename='dashboard.css')}}" rel="stylesheet" type="text/css">
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<script src="{{url_for('customer.static',filename='dashboard.js')}}" defer></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
{% endblock %}



{% block title %} Dashboard {% endblock %}
{% block content %}


<div class="container-fluid mt-4 dash">
    <div class="row">
        <div class="col-md-5 border-end mb-4" id="left-section">
            <!-- Calendar -->
            <div class="row" id="calendar">
                <div class="d-flex justify-content-between">
                    <h3 class="month-year"></h3>
                    <i class="bx bx-chevron bx-chevron-right bx-md opacity-75"></i>
                </div>

                <div class="calendar">
                    <ul class="date-days">
                        <li>Sun</li>
                        <li>Mon</li>
                        <li>Tue</li>
                        <li>Wed</li>
                        <li>Thu</li>
                        <li>Fri</li>
                        <li>Sat</li>
                    </ul>
                    <ul class="date-number">
                    </ul>
                </div>

            </div>
            <br>
            <!-- List booked sessions -->
            <div class="row" id="select-session-type">
                <h3 class="m-0">Your Upcoming Sessions</h3>
                <!--  Keys are sorted so we use these to access the dict in the correct order. -->
                {% for date in keys %}
                <!-- formatting gives e.g Thu 23 Feb -->
                <h5 class="d-flex mt-3 mb-2 opacity-75">{{date.strftime("%a %d %b")}}</h5>
                <div class="list-group">
                    {% for sess in upcoming_sessions[date] %}
                    <a href="{{url_for('customer.manage_sessions')}}"
                        class="list-group-item list-group-item-action d-flex gap-5 p-2 justify-content-between">
                        <p class="d-flex py-1 ps-2 m-0 text-center align-content-center">{{ sess.display_start_time() }} <br> to <br> {{
                            sess.display_end_time() }}</p>
                        <div class="d-flex w-100 gap-4 flex-wrap align-content-center">
                            <div>
                                <h5 class="m-0">{{ sess.display_session_type() }}</h5>
                                <p class="m-0 text-secondary">{{ sess.display_facility() }}</p>
                            </div>

                        </div>
                    </a>
                    {%endfor%}
                </div>
                {% endfor %}

            </div>
        </div>
        <div class="col-md-7 mb-4" id="right-section">
            <div class="row">
                <div class="col">
                    <h3 id="date-selected"></h3>
                </div>
                <div class="col-sm col-md-">
                    <div class="btn-group pb-3 float-start float-sm-end" role="group" aria-label="Activity types">
                        <input type="radio" class="btn-check typeToParse" name="btnradio" id="general"
                            autocomplete="off" checked>
                        <label class="btn btn-outline-success" for="general">General</label>

                        <input type="radio" class="btn-check typeToParse" name="btnradio" id="class" autocomplete="off">
                        <label class="btn btn-outline-warning" for="class">Class</label>

                        <input type="radio" class="btn-check typeToParse" name="btnradio" id="team" autocomplete="off">
                        <label class="btn btn-outline-danger" for="team">Team</label>

                        <input type="radio" class="btn-check typeToParse" name="btnradio" id="all" autocomplete="off">
                        <label class="btn btn-outline-primary" for="all">All</label>
                    </div>
                </div>
            </div>

            <div class="row session-container">
                <!-- example layout
                <div class="list-group mb-4">
                    <a href="{{url_for('customer.booking')}}" class="list-group-item list-group-item-action d-sm-flex p-3">
                        <div class="d-flex gap-5 w-100">
                            <i class="bx bx-swim bx-lg d-none d-md-flex m-auto py-2"></i>
                            <div class="d-inline w-100">
                                <div>
                                    <h5 class="d-flex justify-content-between mb-3 text-secondary">9:00 - 10:00
                                    <span class="badge bg-secondary rounded-pill">50</span></h5>
                                </div>
                                <div class="">
                                    <h5 class="m-0">Swimming</h5>
                                    <p class="m-0 text-secondary">Swimming Pool</p>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                -->
            </div>

            <div class="row">
                <h3 class="p-0"> Membership Details</h3>
                {% if current_user.display_membership_type() != "None" %}
                <p>Your {{current_user.display_membership_type()}} Membership expires at {{
                    current_user.membership_expiration_date.strftime("%a %d %b %Y") }}</p>
                {% else %}
                <p>You do not currently have a membership.</p>
                <a class="btn btn-lg btn-outline-primary" href="{{url_for('customer.membership')}}">Purchase one
                    now?</a>
                {% endif %}
            </div>


        </div>

    </div>
    <div class="row p-2"></div>
</div>

{% endblock %}